{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <style>
        .table-container {
            max-height: 60vh;
            overflow: auto;
        }
        thead th {
            position: sticky;
            top: 0;
        }
    </style>
{% endblock %}

{% block content %}
<!-- HEADER -->
<div class="mb-3" style="background-color: rgb(255, 255, 255)">
    <h1 style="font-weight: 600;">Search for Courses</h1>
</div>

<!-- SEARCH BAR -->
<form class="d-flex flex-row position-relative mb-4" method="POST">
    <input type="search" class="form-control" placeholder="Search for a course.." id="example-search-input" name="search_result" required>

    <button class="btn btn-outline-light border-0 position-absolute end-0" type="submit">
        <i class="bi bi-search" style="color: black;"></i>
    </button>
</form>

<!-- TABLE -->
<div class="table-container">
    <table class="table table-hover table-bordered">
        <thead>
            <tr class="table-light">
                <th scope="col" class="image-column">School</th>
                <th scope="col">Course</th>
                <th scope="col">Name</th>
                <th scope="col">Total Exams</th>
            </tr>
        </thead>
        <tbody>
            {% for course in course_array %}
            {% set name = course.name %}
            {% set num_questions = course.num_questions|string %}
            <tr onClick="window.location.href='/exams?&department={{ course.department }}&code={{ course.code }}&school={{ course.school_id }}&exam_id=0'">
                {% if course.school_id== 'UBC' %}
                    <td class="image-column text-center">
                        <img src="{{ ubc_image }}" class="img-fluid" style="height: 3vh; width: auto;"> 
                    </td>
                {% elif course.school_id == 'UVIC' %}
                    <td class="image-column text-center">
                        <img src="{{ uvic_image }}" class="img-fluid" style="height: 3vh; width: auto;"> 
                    </td>
                {% endif %}
                
                <td>{{ course.department + ' ' + course.code|string }}</td>
                <td>{{ course.name }}</td>
                <td>{{ num_questions + ' ' + 'Exams'}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
