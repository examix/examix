{% extends 'test.html' %}
{% block style %}
<style>
    table {
        border-collapse: collapse;
        width: 50%;
        margin: 20px;
    }

    table, th, td {
        border: 1px solid black;
    }

    th, td {
        padding: 10px;
        text-align: left;
    }

    .extra-info {
        display: none;
        border: 1px solid black;
        padding: 10px;
        margin-top: 20px;
    }
</style>
{% endblock %}

{% block content %}
    <table id="data-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Age</th>
            </tr>
        </thead>
        <tbody>
            {% for person in persons %}
            <tr class="table-row" data-info="{{ person.extra_info }}">
                <td>{{ person.name }}</td>
                <td>{{ person.age }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div id="extra-info-container" class="extra-info"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var tableRows = document.querySelectorAll('.table-row');

            tableRows.forEach(function (row) {
                row.addEventListener('click', function () {
                    // Hide all extra info containers
                    document.querySelectorAll('.extra-info').forEach(function (info) {
                        info.style.display = 'none';
                    });

                    // Show extra info for the clicked row
                    var extraInfoContainer = document.getElementById('extra-info-container');
                    extraInfoContainer.textContent = row.getAttribute('data-info');
                    extraInfoContainer.style.display = 'block';
                });
            });
        });
    </script>
{% endblock %}
