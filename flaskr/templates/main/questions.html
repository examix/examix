{% extends "base.html" %}
{% block title %}Upload{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
<style>
    .upvote-container {
    text-align: center;
    }

    .upvote-button {
        display: inline-flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        background-color: #3498db;
        color: #fff;
        border: none;
        padding: 10px;
        border-radius: 5px;
    }

    .upvote-button:hover {
        background-color: #2980b9;
    }

    #upvoteCount {
        font-size: 1.5rem;
        margin-bottom: 5px;
    }
    .content{
       display: flex;
    }
</style>

{% block content %}

<style>
    .upvote-container {
    text-align: center;
    }

    .upvote-button {
        display: inline-flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        background-color: #3498db;
        color: #fff;
        border: none;
        padding: 10px;
        border-radius: 5px;
    }

    .upvote-button:hover {
        background-color: #2980b9;
    }

    #upvoteCount {
        font-size: 1.5rem;
        margin-bottom: 5px;
    }
</style>

<div class="wrap" style="padding-left: 15%;">
    <div class="content">

        <div class="upvote-container">
            <button id="upvoteButton" class="upvote-button">
                <span id="upvoteCount">0</span>
                <span>Upvote</span>
            </button>
        </div>

        <div class="center">
            <table class="table table-striped" style="max-width: 30vw">
                <!-- <th>Course Code</th>
                <th>Course Name</th>
                <th>Overall Questions</th> -->
                
                <tr>
                    <td id="titleQ"></td>
                    <td id="typeQ"></td>
                    <td id="difficultyQ"></td>
                    <td id="pageNumQ"></td>
                    <td id="pointsQ"></td>
                    <td id="timeQ"></td>

                    <td id="descriptionQ"></td>

                    <td id="imageQ"></td>
                </tr>
        <div id="click" class="d-flex col justify-content-center align-items-center" style="float: left; overflow:scroll; max-height:40vw;">
            <table id="click" class="table table-striped zui-table zui-table-horizontal zui-table-highlight" style="max-width: 30vw;margin-top:35%">
                {% for dict in questions_list %}
                        <tr style="border:none;"><td style="border:none"></td></tr>
                        <tr><td style="border:none;background-color:white;!important"></td></tr>
                        <tr>
                            <th id="tq{{dict['num']|string}}" colspan="3" style="padding-top:10%;">Question {{dict['q_num']|string}}</th>
                        </tr>
                        <tr>
                        <th>Points</th>
                        <th>Difficulty</th>
                        <th>Estimated Time</th>
                        </tr>
                        <tr>
                            <td id="tp{{dict['num']|string}}">{{dict['points']}}</td>
                            <td id="tdi{{dict['num']|string}}">{{dict['difficulty']}}</td>
                            <td id="tdu{{dict['num']|string}}">{{dict['duration']}}</td>
                        </tr>
                        <tr id="click" description="{{dict['description']}}">
                            <td style="text-overflow: ellipsis" id="tde{{dict['num']|string}}" colspan="3">{{dict['description_short']}}</td>
                        </tr>
                {% endfor %}
            </table>
        </div>
        <div class="center" style="float: left; margin-top:20%;">
            <table class="table table-striped" style="max-width: 30vw">
                {% for oneDict in dicts %}
                <tr onclick="showQuestion()">
                    <td id="tq{{oneDict['num']|string}}">Question {{oneDict['num']|string}}</td>
                    <td id="tt{{oneDict['num']|string}}">{{oneDict['type']}}</td>
                    <td id="tdi{{oneDict['num']|string}}">{{oneDict['difficulty']}}</td>
                    <td id="tpn{{oneDict['num']|string}}">{{oneDict['page_num']}}</td>
                    <td id="tp{{oneDict['num']|string}}">{{oneDict['points']}}</td>
                    <td id="tdu{{oneDict['num']|string}}">{{oneDict['duration']}}</td>

                    <td id="tde{{oneDict['num']|string}}">{{oneDict['description']}}</td>

                    <td id="ti{{oneDict['num']|string}}">{{oneDict['image']}}</td>
                </tr>
            </table>
        </div>
    </div>
</div>
<script>
const clickElement = document.getElementById('click');
    if (clickElement) {
        clickElement.addEventListener('click', () => {
            //let text = document.getElementById('click').innerHTML;
const targetRow = event.target.closest('tr');
            if (targetRow) {
                console.log(targetRow);
                const description = targetRow.getAttribute('description');
                document.getElementById('descriptionQ').innerHTML = description;
            }        //let title = document.getElementById('titleQ');
        //let difficulty = document.getElementById('difficultyQ');
        //let points = document.getElementById('pointsQ');
        //let time = document.getElementById('timeQ');

        //let description = document.getElementById('descriptionQ');

        //let image = document.getElementById('imageQ');

        //title.innerHTML = document.getElementById('tq').innerHTML;
        //difficulty.innerHTML = document.getElementById('tdi').innerHTML;
        //points.innerHTML = document.getElementById('tp').innerHTML;
        //time.innerHTML = document.getElementById('tdu').innerHTML;

        //description.innerHTML = document.getElementById('tde').innerHTML;

        //image.innerHTML = document.getElementById('ti').innerHTML;
        });
    }
</script>

{% endblock %}


<script>
    // Initialize the upvote count
    let upvoteCount = 0;

    // Get the necessary elements
    const upvoteButton = document.getElementById('upvoteButton');
    const upvoteCountElement = document.getElementById('upvoteCount');

    // Add a click event listener to the upvote button
    upvoteButton.addEventListener('click', () => {
        // Increment the upvote count
        upvoteCount++;
        
        // Update the upvote count element
        upvoteCountElement.textContent = upvoteCount;
    });

    function showQuestion() {
        let title = document.getElementById('titleQ');
        let type = document.getElementById('typeQ');
        let difficulty = document.getElementById('difficultyQ');
        let pageNum = document.getElementById('pageNumQ');
        let points = document.getElementById('pointsQ');
        let time = document.getElementById('timeQ');

        let description = document.getElementById('descriptionQ');

        let image = document.getElementById('imageQ');

        title.innerHTML = document.getElementById('tq').innerHTML;
        type.innerHTML = document.getElementById('tt').innerHTML;
        difficulty.innerHTML = document.getElementById('tdi').innerHTML;
        pageNum.innerHTML = document.getElementById('tpn').innerHTML;
        points.innerHTML = document.getElementById('tp').innerHTML;
        time.innerHTML = document.getElementById('tdu').innerHTML;

        description.innerHTML = document.getElementById('tde').innerHTML;

        image.innerHTML = document.getElementById('ti').innerHTML;
    }

</script>

{% endblock %}  